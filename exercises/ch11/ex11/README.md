実行結果
console.log(costOfLength(10000));
-0.000010210000000000007
console.log(costOfLength(100000000));
-1.7577e-8
確かに値が負になっているこれの原因として考えられるものとして
costOfLengthPlusLoop関数ではループ中に不変的なHello.lenghtの値を取得している。この場合はJSエンジンが最適化を行いループ内で同じ値を生成する式をループ外に
巻き上げを行うことで処理が高速化しています。そのためconstOfLengthPlusLoop関数の方が処理が遅い場合がある。
またループを増やすと performance.now()の処理に比べてループのオーバーヘッドが相対的に小さくなるため差が小さくなります。